{%- set version = params.version | camel_case -%}
{{- template.set_file_name("pkg/rule/metrics/" ~ "deprecated_" ~ version ~ ".go") -}}
// Code generated by otel-lint. DO NOT EDIT.
package metrics

import (
	"github.com/ymtdzzz/otel-lint/pkg/rule"
)

var RulesDeprecated{{ version }} = []*rule.MetricRule{
{% for metric in ctx %}
	ruleDeprecated{{ metric.metric_name | pascal_case }}{{ version }},
{% endfor %}
}

{% for metric in ctx %}
{%- set metric_name = metric.metric_name | pascal_case -%}
var ruleDeprecated{{ metric_name }}{{ version }} = &rule.MetricRule{
	Name:         "deprecated.{{metric.metric_name}}",
	Title:        "{{ metric.brief | trim | replace("\"", "") }}",
	Check:        checkDeprecated{{ metric_name }}{{ version }},
	Severity:     rule.SeverityError,
	Stability:    rule.{{ metric.stability | map_text("stabilities", "StabilityExperimental") }},
	Source:       "",
}

func checkDeprecated{{ metric_name }}{{ version }}(m *rule.Metrics) bool {
  return m.Name() != "{{ metric.metric_name }}"
}

{% endfor %}
